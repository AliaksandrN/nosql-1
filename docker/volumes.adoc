# Volumes in Containers
:source-highlighter: pygments
:pygments-style: manni
:icons: font
:figure-caption!:

Sample Data from https://docs.mongodb.com/manual/tutorial/geospatial-tutorial[Find Restaurants with Geospatial Queries] tutorial:
* https://raw.githubusercontent.com/mongodb/docs-assets/geospatial/neighborhoods.json[neighborhoods.json]
* https://raw.githubusercontent.com/mongodb/docs-assets/geospatial/restaurants.json[restaurants.json]

Cleaning up the by stopping and removing containers and volumes you created:
[source,sh]
----
docker info
docker images

docker ps --all                  # show running and stopped containers
docker stop CONTAINER...
docker rm --volumes CONTAINER... # remove the volumes associated with the container
----

## Volume types

bind mount::
  mount directory/file on the host OS
managed::
  use locations in Docker managed space


### Bind mount

* https://hub.docker.com/_/nginx/[Nginx official repository]

Bind mount location _~/.volumes/nginx_ on host OS:
[source,sh]
----
docker run --detach \
  --publish 80:80 \
  --volume  ~/.volumes/nginx:/usr/share/nginx/html \
  --name    web
  nginx:latest

docker exec -it web /bin/bash
# echo $PATH
# cd /usr/share/nginx/html
# cat index.html

# visit localhost
docker stop web
docker rm -vf web
----


### Docker managed mount

* https://hub.docker.com/_/mongo/[Monngo official repository]

Bind mount a data volume inside containerâ€™s default mount point.
[source,sh]
----
docker run --detach \
  --volume /data/db \
  --name   nosql \
  mongo:latest

docker exec -it nosql /bin/bash
# echo $PATH
# ls /usr/bin/mongo*
# which gunzip
# sensible-pager /usr/local/bin/docker-entrypoint.sh
# ls /usr/bin/

# docker inspect nosql | jq .
docker inspect -f "{{json .Mounts}}" nosql | jq .
# host path is relative to the virtual machine root FS (Docker Machine)
# "Source": "/var/lib/docker/volumes/fb...ab/_data
# container path
# "Destination": "/data/db"

docker run --detach \
  --name nosql \
  mongo:latest

docker inspect -f "{{json .Mounts}}" nosql | jq .
----


### Import data into container

[source,sh]
----
docker run --name nosql \
  --volume  ~/.volumes/nosql/data:/data/db \
  --detach  mongo:latest
----











.
